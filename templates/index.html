<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Fun Terminal</title>
<style>
  body { background: #0c0c0c; color: #0f0; font-family: monospace; padding: 20px; font-size: 16px; }
  #terminal { white-space: pre-wrap; line-height: 1.4; }
</style>
</head>
<body>
<div id="terminal"></div>
<script>
async function getIP() {
  try {
    let res = await fetch("https://ipapi.co/json/");
    return await res.json();
  } catch (e) {
    return {ip:"unknown"};
  }
}

const term = document.getElementById("terminal");

function typeLine(text, delay=30) {
  return new Promise(resolve=>{
    let i=0;
    let interval = setInterval(()=>{
      term.innerHTML += text[i++];
      if(i >= text.length){
        clearInterval(interval);
        term.innerHTML += "\n";
        resolve();
      }
    },delay);
  });
}

(async ()=>{
  await typeLine("Initializing system...");
  await typeLine("Loading funny codes... â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%");
  await typeLine("Hello stranger! What is your name?");
  
  let name = prompt("Enter your name:");
  if(!name) name = "Anonymous";

  let ipinfo = await getIP();

  await typeLine("> Access granted to " + name);
  await typeLine("> Running virus.exe ... (just kidding ðŸ˜‚)");
  await typeLine("> Checking IP: " + ipinfo.ip);
  await typeLine("> Location: " + (ipinfo.city || "??") + ", " + (ipinfo.country || "??"));
  await typeLine("> Uploading memes to your brain... âœ…");
  await typeLine("System complete. Enjoy your stay!");

  fetch("/log", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify({name, ip: ipinfo.ip, time:new Date().toISOString()})
  }).catch(()=>{});
})();
</script>
</body>
</html>
